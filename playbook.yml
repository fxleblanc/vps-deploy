- name: setup vps
  hosts: vps
  become: true
  become_user: root
  become_method: sudo
  tasks:
    # Needs lxc-dev for lxc-python2
    # https://github.com/ansible/ansible-modules-extras/issues/550
    - name: install lxc-dev
      apt:
        name: lxc-dev

    - name: install pip2
      apt:
        name: python-pip

    - name: install lxc-python2
      pip:
        name: lxc-python2

    - name: install bridge-utils
      apt:
        name: bridge-utils

    - name: destroy jupyter container
      lxc_container:
        name: jupyter
        state: absent
    
    - name: start jupyter container
      lxc_container:
        name: jupyter
        template: debian
        state: started